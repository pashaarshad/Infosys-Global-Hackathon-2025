{% extends "base-ultra.html" %}

{% block title %}Rewards - SmartRecycle | Green Points Marketplace{% endblock %}

{% block extra_css %}
<style>
    .rewards-hero {
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 152, 0, 0.8)), url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80');
        background-size: cover;
        background-position: center;
        padding: 6rem 0;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .rewards-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, rgba(255, 193, 7, 0.3), rgba(255, 152, 0, 0.3));
        animation: shimmer 3s ease-in-out infinite;
    }
    
    @keyframes shimmer {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 0.6; }
    }
    
    .points-display {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(15px);
        border-radius: 25px;
        padding: 2rem;
        margin: 2rem auto;
        max-width: 400px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        text-align: center;
    }
    
    .points-number {
        font-size: 3rem;
        font-weight: 800;
        background: linear-gradient(135deg, #fff, #ffecb3);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0.5rem 0;
    }
    
    .rewards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
    }
    
    .reward-card {
        background: white;
        border-radius: 25px;
        padding: 2.5rem;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        transition: all 0.4s ease;
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
    }
    
    .reward-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }
    
    .reward-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        border-color: var(--primary-color);
    }
    
    .reward-icon {
        font-size: 4rem;
        text-align: center;
        margin-bottom: 1.5rem;
        display: block;
    }
    
    .reward-price {
        color: var(--primary-color);
        font-size: 1.8rem;
        font-weight: 800;
        margin: 1rem 0;
        text-align: center;
    }
    
    .reward-points {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 20px;
        text-align: center;
        font-weight: 600;
        margin: 1.5rem 0;
        font-size: 1.1rem;
    }
    
    .reward-button {
        width: 100%;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border: none;
        padding: 1rem 1.5rem;
        border-radius: 20px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .reward-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
    }
    
    .reward-button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
    }
    
    .rewards-categories {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 3rem 0;
        flex-wrap: wrap;
    }
    
    .category-tab {
        background: white;
        border: 2px solid var(--primary-color);
        color: var(--primary-color);
        padding: 1rem 2rem;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
    }
    
    .category-tab.active,
    .category-tab:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
    }
    
    .achievement-badge {
        background: linear-gradient(135deg, #ffecb3, #fff9c4);
        border: 2px solid #ffc107;
        border-radius: 20px;
        padding: 1.5rem;
        margin: 1rem 0;
        text-align: center;
        color: #f57f17;
        font-weight: 600;
    }
    
    .level-progress {
        background: #f0f0f0;
        border-radius: 20px;
        height: 20px;
        margin: 1rem 0;
        overflow: hidden;
        position: relative;
    }
    
    .level-progress-bar {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        height: 100%;
        border-radius: 20px;
        transition: width 1s ease;
        position: relative;
    }
    
    .level-progress-bar::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        animation: shine 2s infinite;
    }
    
    @keyframes shine {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }
    
    .premium-rewards {
        background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(233, 30, 99, 0.1));
        padding: 3rem 0;
        margin: 4rem 0;
        border-radius: 30px;
        border: 2px solid #9c27b0;
    }
    
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 10000;
    }
    
    .modal-content {
        background: white;
        padding: 3rem;
        border-radius: 25px;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        text-align: center;
    }
</style>
{% endblock %}

{% block content %}
<!-- Ultra-Premium Hero Section -->
<section class="rewards-hero">
    <div class="container">
        <div class="hero-content text-center">
            <div class="hero-badge">
                <span>üíé Green Points Marketplace</span>
            </div>
            <h1 class="hero-title">
                <span class="gradient-text">Rewards & Recognition</span>
                <br>
                <span class="subtitle">Turn Green Actions into Real Rewards</span>
            </h1>
            <p class="hero-description">
                Redeem your eco-points for amazing rewards, discounts, and exclusive offers. 
                Every sustainable action gets rewarded!
            </p>
            
            <div class="points-display">
                <div>
                    <i class="fas fa-coins" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                </div>
                <div class="points-number" id="user-points">2,450</div>
                <p style="margin: 0; font-size: 1.2rem; font-weight: 500;">Available Green Points</p>
                <div class="level-progress">
                    <div class="level-progress-bar" style="width: 75%"></div>
                </div>
                <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Level 7 Eco Warrior ‚Ä¢ 550 points to next level</p>
            </div>
        </div>
    </div>
</section>

<!-- Rewards Categories -->
<section class="container">
    <div class="rewards-categories">
        <div class="category-tab active" onclick="filterRewards('all')">
            üèÜ All Rewards
        </div>
        <div class="category-tab" onclick="filterRewards('vouchers')">
            üõí Shopping Vouchers
        </div>
        <div class="category-tab" onclick="filterRewards('food')">
            üçï Food & Dining
        </div>
        <div class="category-tab" onclick="filterRewards('digital')">
            üì± Digital Services
        </div>
        <div class="category-tab" onclick="filterRewards('premium')">
            üíé Premium Rewards
        </div>
    </div>
</section>

<!-- Rewards Grid -->
<section class="container">
    <div class="rewards-grid" id="rewards-container">
        <!-- Shopping Vouchers -->
        <div class="reward-card" data-category="vouchers">
            <span class="reward-icon">üõí</span>
            <h3>Amazon Voucher</h3>
            <p>Shop for eco-friendly products with this Amazon gift voucher</p>
            <div class="reward-price">‚Çπ500</div>
            <div class="reward-points">400 Green Points</div>
            <button onclick="redeemReward('amazon_500', 400)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="vouchers">
            <span class="reward-icon">üõçÔ∏è</span>
            <h3>Flipkart Voucher</h3>
            <p>Get the latest gadgets and products with this Flipkart voucher</p>
            <div class="reward-price">‚Çπ1,000</div>
            <div class="reward-points">800 Green Points</div>
            <button onclick="redeemReward('flipkart_1000', 800)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="vouchers">
            <span class="reward-icon">üëï</span>
            <h3>Myntra Fashion Voucher</h3>
            <p>Upgrade your wardrobe with sustainable fashion choices</p>
            <div class="reward-price">‚Çπ750</div>
            <div class="reward-points">600 Green Points</div>
            <button onclick="redeemReward('myntra_750', 600)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>

        <!-- Food & Dining -->
        <div class="reward-card" data-category="food">
            <span class="reward-icon">üçï</span>
            <h3>Zomato Voucher</h3>
            <p>Enjoy delicious meals from your favorite restaurants</p>
            <div class="reward-price">‚Çπ300</div>
            <div class="reward-points">250 Green Points</div>
            <button onclick="redeemReward('zomato_300', 250)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="food">
            <span class="reward-icon">‚òï</span>
            <h3>Cafe Coffee Day Voucher</h3>
            <p>Relax with premium coffee and snacks at CCD</p>
            <div class="reward-price">‚Çπ200</div>
            <div class="reward-points">150 Green Points</div>
            <button onclick="redeemReward('ccd_200', 150)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="food">
            <span class="reward-icon">üçî</span>
            <h3>Swiggy Voucher</h3>
            <p>Order your favorite food with free delivery</p>
            <div class="reward-price">‚Çπ400</div>
            <div class="reward-points">320 Green Points</div>
            <button onclick="redeemReward('swiggy_400', 320)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>

        <!-- Digital Services -->
        <div class="reward-card" data-category="digital">
            <span class="reward-icon">üì±</span>
            <h3>Mobile Recharge</h3>
            <p>Instant mobile recharge for any network operator in India</p>
            <div class="reward-price">‚Çπ100</div>
            <div class="reward-points">80 Green Points</div>
            <button onclick="redeemReward('mobile_100', 80)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="digital">
            <span class="reward-icon">üé¨</span>
            <h3>Netflix Premium</h3>
            <p>Enjoy 1 month of Netflix premium subscription</p>
            <div class="reward-price">‚Çπ649</div>
            <div class="reward-points">500 Green Points</div>
            <button onclick="redeemReward('netflix_649', 500)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
        
        <div class="reward-card" data-category="digital">
            <span class="reward-icon">üéµ</span>
            <h3>Spotify Premium</h3>
            <p>3 months of ad-free music streaming with Spotify Premium</p>
            <div class="reward-price">‚Çπ399</div>
            <div class="reward-points">300 Green Points</div>
            <button onclick="redeemReward('spotify_399', 300)" class="reward-button">
                <i class="fas fa-gift"></i> Redeem Now
            </button>
        </div>
    </div>
</section>
                    <i class="fas fa-gift"></i> Redeem Now
                </button>
            </div>
            
            <!-- Environmental Donations -->
            <div class="reward-card premium">
                <div class="reward-icon">üå≥</div>
                <h3>Plant a Tree</h3>
                <p>Fund tree plantation in your name through verified NGOs</p>
                <div class="reward-points">80 Points</div>
                <button onclick="redeemReward('plant_tree', 80)" class="reward-button premium-btn">
                    <i class="fas fa-leaf"></i> Plant Tree
                </button>
            </div>
            
            <div class="reward-card premium">
                <div class="reward-icon">üíß</div>
                <h3>Clean Water Project</h3>
                <p>Support clean water initiatives in rural communities</p>
                <div class="reward-points">120 Points</div>
                <button onclick="redeemReward('water_project', 120)" class="reward-button premium-btn">
                    <i class="fas fa-tint"></i> Support Project
                </button>
            </div>
            
            <div class="reward-card premium">
                <div class="reward-icon">üåû</div>
                <h3>Solar Energy Fund</h3>
                <p>Contribute to renewable energy projects</p>
                <div class="reward-points">200 Points</div>
                <button onclick="redeemReward('solar_fund', 200)" class="reward-button premium-btn">
                    <i class="fas fa-solar-panel"></i> Contribute
                </button>
            </div>
            
            <!-- Certificates -->
            <div class="reward-card certificate">
                <div class="reward-icon">üèÖ</div>
                <h3>Eco Warrior Certificate</h3>
                <p>Downloadable PDF certificate recognizing your environmental efforts</p>
                <div class="reward-points">30 Points</div>
                <button onclick="generateCertificate('eco_warrior')" class="reward-button cert-btn">
                    <i class="fas fa-download"></i> Download
                </button>
            </div>
            
            <div class="reward-card certificate">
                <div class="reward-icon">üåü</div>
                <h3>Sustainability Champion</h3>
                <p>Premium certificate for exceptional environmental contribution</p>
                <div class="reward-points">100 Points</div>
                <button onclick="generateCertificate('sustainability_champion')" class="reward-button cert-btn">
                    <i class="fas fa-download"></i> Download
                </button>
            </div>
            
            <!-- Physical Rewards -->
            <div class="reward-card physical">
                <div class="reward-icon">üéΩ</div>
                <h3>Eco-Friendly T-Shirt</h3>
                <p>100% organic cotton t-shirt with SmartRecycle logo</p>
                <div class="reward-points">250 Points</div>
                <button onclick="redeemReward('eco_tshirt', 250)" class="reward-button physical-btn">
                    <i class="fas fa-shipping-fast"></i> Order Now
                </button>
            </div>
            
            <div class="reward-card physical">
                <div class="reward-icon">üéí</div>
                <h3>Recycled Tote Bag</h3>
                <p>Stylish tote bag made from recycled materials</p>
                <div class="reward-points">150 Points</div>
                <button onclick="redeemReward('tote_bag', 150)" class="reward-button physical-btn">
                    <i class="fas fa-shipping-fast"></i> Order Now
                </button>
            </div>
            
            <div class="reward-card physical">
                <div class="reward-icon">üçØ</div>
                <h3>Eco Care Package</h3>
                <p>Sustainable lifestyle products bundle</p>
                <div class="reward-points">300 Points</div>
                <button onclick="redeemReward('care_package', 300)" class="reward-button physical-btn">
                    <i class="fas fa-shipping-fast"></i> Order Now
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Premium Rewards Section -->
<section class="premium-rewards">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">üíé Premium Eco Rewards</h2>
            <p class="section-subtitle">Exclusive rewards for our top eco-warriors</p>
        </div>
        
        <div class="rewards-grid">
            <div class="reward-card" data-category="premium">
                <span class="reward-icon">üå±</span>
                <h3>Eco-Friendly Product Kit</h3>
                <p>Complete sustainable living kit with bamboo products, reusable items, and organic essentials</p>
                <div class="reward-price">‚Çπ2,500</div>
                <div class="reward-points">2,000 Green Points</div>
                <button onclick="redeemReward('eco_kit_2500', 2000)" class="reward-button">
                    <i class="fas fa-gift"></i> Redeem Now
                </button>
            </div>
            
            <div class="reward-card" data-category="premium">
                <span class="reward-icon">üöó</span>
                <h3>Uber Green Ride Credits</h3>
                <p>‚Çπ1,000 worth of credits for eco-friendly Uber rides in your city</p>
                <div class="reward-price">‚Çπ1,000</div>
                <div class="reward-points">1,200 Green Points</div>
                <button onclick="redeemReward('uber_green_1000', 1200)" class="reward-button">
                    <i class="fas fa-gift"></i> Redeem Now
                </button>
            </div>
            
            <div class="reward-card" data-category="premium">
                <span class="reward-icon">üèÜ</span>
                <h3>Eco Warrior Certificate</h3>
                <p>Official digital certificate recognizing your contribution to environmental sustainability</p>
                <div class="reward-price">FREE</div>
                <div class="reward-points">1,000 Green Points</div>
                <button onclick="redeemReward('eco_certificate', 1000)" class="reward-button">
                    <i class="fas fa-gift"></i> Redeem Now
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Achievement Badges -->
<section class="container">
    <div class="section">
        <div class="section-header text-center">
            <h2 class="section-title">üèÖ Your Achievements</h2>
            <p class="section-subtitle">Unlock badges as you progress in your eco journey</p>
        </div>
        
        <div class="achievement-badges">
            <div class="achievement-badge">
                <h4>üå± Eco Beginner</h4>
                <p>Completed your first recycling action ‚Ä¢ <strong>Unlocked</strong></p>
            </div>
            
            <div class="achievement-badge">
                <h4>‚ôªÔ∏è Recycling Hero</h4>
                <p>Recycled 10 different types of waste ‚Ä¢ <strong>Unlocked</strong></p>
            </div>
            
            <div class="achievement-badge">
                <h4>üöõ Pickup Master</h4>
                <p>Scheduled 5 successful pickups ‚Ä¢ <strong>Unlocked</strong></p>
            </div>
            
            <div class="achievement-badge" style="opacity: 0.5;">
                <h4>üåç Planet Protector</h4>
                <p>Save 100kg of CO‚ÇÇ ‚Ä¢ <strong>In Progress (75/100)</strong></p>
            </div>
            
            <div class="achievement-badge" style="opacity: 0.5;">
                <h4>üèÜ Eco Champion</h4>
                <p>Reach 5,000 green points ‚Ä¢ <strong>Locked (2,450/5,000)</strong></p>
            </div>
        </div>
    </div>
</section>

<!-- Referral Program -->
<section class="container">
    <div class="section bg-gradient" style="background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1)); padding: 3rem; border-radius: 30px;">
        <div class="text-center">
            <h2>üë• Refer & Earn</h2>
            <p>Invite friends to join SmartRecycle and earn bonus points!</p>
            
            <div class="referral-stats">
                <div class="row">
                    <div class="col-md-4">
                        <div class="stat-card">
                            <h3>12</h3>
                            <p>Friends Referred</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-card">
                            <h3>600</h3>
                            <p>Bonus Points Earned</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-card">
                            <h3>8</h3>
                            <p>Active Referrals</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="referral-code">
                <h4>Your Referral Code: <code style="background: var(--primary-color); color: white; padding: 0.5rem 1rem; border-radius: 10px; font-weight: bold;">ECO2024ARSH</code></h4>
                <p>Share this code and earn 50 points for each friend who joins!</p>
                <button class="btn btn-primary" onclick="shareReferralCode()">
                    <i class="fas fa-share-alt"></i> Share Code
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Success Modal -->
<div id="redemption-modal" class="modal">
    <div class="modal-content">
        <div id="modal-content-inner">
            <!-- Content will be populated by JavaScript -->
        </div>
    </div>
</div>

<!-- Back to Home Button -->
<div class="text-center" style="margin: 3rem 0;">
    <a href="{{ url_for('home') }}" class="btn btn-secondary btn-lg">
        <i class="fas fa-arrow-left"></i>
        Return to Home
    </a>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Enhanced reward redemption with user feedback
    function redeemReward(rewardType, pointsCost) {
        const currentPoints = parseInt(document.getElementById('user-points').textContent);
        
        if (currentPoints >= pointsCost) {
            // Show confirmation dialog
            const confirmMessage = `Redeem this reward for ${pointsCost} points?`;
            if (confirm(confirmMessage)) {
                // Process redemption
                processRedemption(rewardType, pointsCost, currentPoints);
            }
        } else {
            const shortfall = pointsCost - currentPoints;
            showMessage(`‚ö†Ô∏è You need ${shortfall} more points to redeem this reward.`, 'warning');
            showEarningTips();
        }
    }

    function processRedemption(rewardType, pointsCost, currentPoints) {
        const rewardNames = {
            'amazon_voucher': 'Amazon Voucher (‚Çπ100)',
            'food_discount': 'Food Delivery Discount (20%)',
            'mobile_recharge': 'Mobile Recharge (‚Çπ50)',
            'plant_tree': 'Tree Plantation',
            'water_project': 'Clean Water Project',
            'solar_fund': 'Solar Energy Fund',
            'eco_tshirt': 'Eco-Friendly T-Shirt',
            'tote_bag': 'Recycled Tote Bag',
            'care_package': 'Eco Care Package'
        };

        // Simulate processing delay
        const processingMessage = showMessage('üîÑ Processing your redemption...', 'info');
        
        setTimeout(() => {
            // Update points
            const newPoints = currentPoints - pointsCost;
            updateUserPoints(newPoints);
            
            // Show success message
            const rewardName = rewardNames[rewardType];
            showMessage(`üéâ ${rewardName} redeemed successfully!`, 'success');
            
            // Add to redemption history
            addToRedemptionHistory(rewardType, rewardName, pointsCost);
            
            // Show redemption confirmation
            setTimeout(() => {
                showRedemptionConfirmation(rewardName, pointsCost);
            }, 2000);
            
        }, 2000);
    }

    function updateUserPoints(newPoints) {
        const pointsElement = document.getElementById('user-points');
        animateNumber(pointsElement, parseInt(pointsElement.textContent), newPoints, 1000);
        
        // Update tier if necessary
        updateTierStatus(newPoints);
    }

    function updateTierStatus(points) {
        const tierCards = document.querySelectorAll('.tier-card');
        tierCards.forEach(card => {
            card.classList.remove('active');
        });

        if (points >= 1500) {
            document.querySelector('.tier-card.gold').classList.add('active');
        } else if (points >= 500) {
            document.querySelector('.tier-card.silver').classList.add('active');
        } else {
            document.querySelector('.tier-card.bronze').classList.add('active');
        }
    }

    function addToRedemptionHistory(rewardType, rewardName, pointsCost) {
        const historyContainer = document.querySelector('.redemption-history');
        const newItem = document.createElement('div');
        newItem.className = 'history-item fade-in';
        
        const icons = {
            'amazon_voucher': 'üõí',
            'food_discount': 'üçï',
            'mobile_recharge': 'üì±',
            'plant_tree': 'üå≥',
            'water_project': 'üíß',
            'solar_fund': 'üåû',
            'eco_tshirt': 'üéΩ',
            'tote_bag': 'üéí',
            'care_package': 'üçØ'
        };
        
        newItem.innerHTML = `
            <div class="history-icon">${icons[rewardType]}</div>
            <div class="history-content">
                <h4>${rewardName}</h4>
                <p>Just redeemed</p>
                <span class="history-date">Just now</span>
            </div>
            <div class="history-points">-${pointsCost} pts</div>
        `;
        
        historyContainer.insertBefore(newItem, historyContainer.firstChild);
    }

    function showRedemptionConfirmation(rewardName, pointsCost) {
        const confirmation = document.createElement('div');
        confirmation.className = 'redemption-confirmation';
        confirmation.innerHTML = `
            <div style="background: linear-gradient(135deg, #4CAF50, #388E3C); color: white; padding: 2rem; border-radius: 15px; text-align: center; margin: 2rem auto; max-width: 500px; animation: slideIn 0.5s ease;">
                <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                <h3>Redemption Successful! üéâ</h3>
                <p style="margin: 1rem 0;"><strong>${rewardName}</strong></p>
                <p style="margin: 1rem 0; font-size: 1.1rem;">Points deducted: <strong>${pointsCost}</strong></p>
                <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                    <p style="margin: 0; font-size: 0.9rem;">
                        üìß Confirmation details sent to your email<br>
                        üéÅ Reward will be processed within 24 hours
                    </p>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" style="background: white; color: #2E7D32; border: none; padding: 0.5rem 1rem; border-radius: 5px; margin-top: 1rem; cursor: pointer;">
                    Close
                </button>
            </div>
        `;
        
        document.querySelector('.container').appendChild(confirmation);
        confirmation.scrollIntoView({ behavior: 'smooth' });
    }

    function showEarningTips() {
        const tips = document.createElement('div');
        tips.className = 'earning-tips';
        tips.innerHTML = `
            <div style="background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: 2rem; border-radius: 15px; margin: 1rem auto; max-width: 500px;">
                <h4>üí° Quick Ways to Earn Points:</h4>
                <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                    <li>üöõ Schedule a pickup: +10 points</li>
                    <li>‚ôªÔ∏è Submit 5kg waste: +10 points</li>
                    <li>üîã Recycle e-waste: +15 points</li>
                    <li>üì± Daily app usage: +5 points</li>
                </ul>
                <a href="/request-pickup" style="background: white; color: #1976D2; padding: 0.5rem 1rem; text-decoration: none; border-radius: 5px; font-weight: bold;">
                    Start Earning Now
                </a>
            </div>
        `;
        
        document.querySelector('.container').appendChild(tips);
        
        // Auto-remove after 8 seconds
        setTimeout(() => {
            tips.remove();
        }, 8000);
    }

    // Certificate generation function
    function generateCertificate(certificateType) {
        const certificates = {
            'eco_warrior': {
                name: 'Eco Warrior Certificate',
                cost: 30,
                description: 'Environmental Contribution Recognition'
            },
            'sustainability_champion': {
                name: 'Sustainability Champion Certificate',
                cost: 100,
                description: 'Excellence in Environmental Stewardship'
            }
        };

        const cert = certificates[certificateType];
        const currentPoints = parseInt(document.getElementById('user-points').textContent);
        
        if (currentPoints >= cert.cost) {
            showMessage('üèÜ Generating your certificate...', 'info');
            
            setTimeout(() => {
                updateUserPoints(currentPoints - cert.cost);
                showMessage(`üìÑ ${cert.name} downloaded successfully!`, 'success');
                
                // Simulate certificate data
                const certificateData = {
                    type: cert.name,
                    recipient: 'Eco Warrior',
                    description: cert.description,
                    date: new Date().toLocaleDateString(),
                    points: cert.cost
                };
                
                console.log('Certificate Generated:', certificateData);
                
                // Add to history
                addToRedemptionHistory(certificateType, cert.name, cert.cost);
            }, 2000);
        } else {
            showMessage(`‚ö†Ô∏è You need ${cert.cost - currentPoints} more points for this certificate.`, 'warning');
        }
    }

    // Animation for number changes
    function animateNumber(element, start, end, duration) {
        const range = end - start;
        const minTimer = 50;
        const stepTime = Math.abs(Math.floor(duration / range));
        const timer = Math.max(stepTime, minTimer);
        
        const startTime = Date.now();
        const endTime = startTime + duration;
        
        function run() {
            const now = Date.now();
            const remaining = Math.max((endTime - now) / duration, 0);
            const value = Math.round(end - (remaining * range));
            
            element.textContent = value;
            
            if (value !== end) {
                setTimeout(run, timer);
            }
        }
        
        run();
    }

    // Initialize reward cards with hover effects
    document.addEventListener('DOMContentLoaded', function() {
        const rewardCards = document.querySelectorAll('.reward-card');
        rewardCards.forEach((card, index) => {
            // Add entrance animation
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
            
            // Add hover effect
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    });

    // Add custom CSS for reward cards
    const rewardStyles = document.createElement('style');
    rewardStyles.textContent = `
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .reward-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            border: 3px solid transparent;
        }
        
        .reward-card.premium {
            border-color: #FF9800;
            background: linear-gradient(135deg, #FFF3E0, #FFECB3);
        }
        
        .reward-card.certificate {
            border-color: #9C27B0;
            background: linear-gradient(135deg, #F3E5F5, #E1BEE7);
        }
        
        .reward-card.physical {
            border-color: #2196F3;
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
        }
        
        .reward-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .reward-points {
            background: #4CAF50;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: bold;
            margin: 1rem 0;
            display: inline-block;
        }
        
        .reward-button {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .reward-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .premium-btn {
            background: linear-gradient(135deg, #FF9800, #F57C00);
        }
        
        .cert-btn {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        }
        
        .physical-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }
        
        .earning-guide {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .earning-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .earning-icon {
            font-size: 2.5rem;
            width: 60px;
            text-align: center;
        }
        
        .earning-content {
            flex: 1;
        }
        
        .earning-content h4 {
            margin: 0 0 0.5rem 0;
            color: #333;
        }
        
        .earning-content p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .earning-rate {
            background: #4CAF50;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .redemption-history {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .history-item {
            display: flex;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            gap: 1rem;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-icon {
            font-size: 2rem;
            width: 50px;
            text-align: center;
        }
        
        .history-content {
            flex: 1;
        }
        
        .history-content h4 {
            margin: 0 0 0.25rem 0;
            color: #333;
        }
        
        .history-content p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .history-date {
            color: #999;
            font-size: 0.8rem;
        }
        
        .history-points {
            font-weight: bold;
            color: #F44336;
        }
        
        .tier-system {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .tier-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 3px solid #ddd;
        }
        
        .tier-card.active {
            border-color: #4CAF50;
            transform: scale(1.05);
        }
        
        .tier-card.bronze.active {
            background: linear-gradient(135deg, #EFEBE9, #D7CCC8);
        }
        
        .tier-card.silver.active {
            background: linear-gradient(135deg, #F5F5F5, #E0E0E0);
        }
        
        .tier-card.gold.active {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
        }
        
        .tier-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .tier-range {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .tier-benefits {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }
        
        .tier-benefits li {
            padding: 0.3rem 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .tier-status {
            background: #4CAF50;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: bold;
            display: inline-block;
        }
        
        .tier-progress {
            background: #ddd;
            color: #666;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            display: inline-block;
        }
        
        @media (max-width: 768px) {
            .rewards-grid {
                grid-template-columns: 1fr;
            }
            
            .earning-item {
                flex-direction: column;
                text-align: center;
            }
            
            .tier-system {
                grid-template-columns: 1fr;
            }
        }
    `;
    document.head.appendChild(rewardStyles);
</script>
{% endblock %}
