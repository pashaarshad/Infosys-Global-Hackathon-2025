{% extends "base.html" %}

{% block title %}Contact Us - SmartRecycle{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <h1>üìû Contact Us</h1>
        <p>Get in touch with our team for support, partnerships, or feedback</p>
        <p class="text-center" style="color: #666; font-style: italic;">We'd love to hear from you and help with any questions!</p>
    </div>
</section>

<!-- Contact Form -->
<section class="container">
    <div class="section">
        <div class="contact-container">
            <div class="contact-form-section">
                <h2>üí¨ Send us a Message</h2>
                <form id="contact-form" onsubmit="event.preventDefault(); submitContactForm();">
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user"></i> Full Name *
                        </label>
                        <input type="text" id="name" name="name" class="form-input" 
                               placeholder="Enter your full name" required>
                    </div>

                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i> Email Address *
                        </label>
                        <input type="email" id="email" name="email" class="form-input" 
                               placeholder="your.email@example.com" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">
                            <i class="fas fa-phone"></i> Phone Number (Optional)
                        </label>
                        <input type="tel" id="phone" name="phone" class="form-input" 
                               placeholder="+91 9876543210">
                    </div>

                    <div class="form-group">
                        <label for="subject">
                            <i class="fas fa-tag"></i> Subject *
                        </label>
                        <select id="subject" name="subject" class="form-input" required>
                            <option value="">Select a subject</option>
                            <option value="general">General Inquiry</option>
                            <option value="support">Technical Support</option>
                            <option value="partnership">Partnership Opportunity</option>
                            <option value="feedback">Feedback & Suggestions</option>
                            <option value="bug">Report a Bug</option>
                            <option value="feature">Feature Request</option>
                            <option value="media">Media & Press</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="message">
                            <i class="fas fa-comment"></i> Message *
                        </label>
                        <textarea id="message" name="message" class="form-input" 
                                  placeholder="Tell us how we can help you..." rows="6" required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="newsletter" name="newsletter">
                            <span class="checkmark"></span>
                            Subscribe to our newsletter for updates on sustainability and platform news
                        </label>
                    </div>

                    <button type="submit" class="form-button">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                </form>
            </div>

            <div class="contact-info-section">
                <h2>üìç Get in Touch</h2>
                <div class="contact-methods">
                    <div class="contact-method">
                        <div class="method-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="method-content">
                            <h4>Email Support</h4>
                            <p>support@smartrecycle.com</p>
                            <span class="response-time">Response within 24 hours</span>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="method-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="method-content">
                            <h4>Phone Support</h4>
                            <p>+91 9876543210</p>
                            <span class="response-time">Mon-Fri: 9 AM - 6 PM IST</span>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="method-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="method-content">
                            <h4>Office Address</h4>
                            <p>123 Green Tech Plaza<br>New Delhi, India - 110001</p>
                            <span class="response-time">Visits by appointment only</span>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="method-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="method-content">
                            <h4>Live Chat</h4>
                            <p>Available on website</p>
                            <span class="response-time">Mon-Fri: 10 AM - 5 PM IST</span>
                        </div>
                    </div>
                </div>

                <div class="social-links">
                    <h4>üåê Follow Us</h4>
                    <div class="social-buttons">
                        <a href="#" class="social-btn twitter">
                            <i class="fab fa-twitter"></i> Twitter
                        </a>
                        <a href="#" class="social-btn linkedin">
                            <i class="fab fa-linkedin"></i> LinkedIn
                        </a>
                        <a href="#" class="social-btn instagram">
                            <i class="fab fa-instagram"></i> Instagram
                        </a>
                        <a href="#" class="social-btn github">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="container">
    <div class="section">
        <h2>‚ùì Frequently Asked Questions</h2>
        <div class="faq-container">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>How does SmartRecycle help with waste management?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>SmartRecycle provides a comprehensive platform for waste sorting guidance, pickup scheduling, impact tracking, and rewards. You can identify recyclable items, find nearby recycling centers, request collection services, and earn points for your eco-friendly actions.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>Is the platform free to use?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes! SmartRecycle is completely free for individual users. Our basic features including waste identification, recycler locations, and impact tracking are available at no cost. Premium features for businesses and organizations may have associated fees.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>How do I earn and redeem green points?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>You earn points by submitting recyclables (2 points/kg), requesting pickups (10 points), proper e-waste disposal (15 points), and daily platform engagement (5 points). Points can be redeemed for discounts, donations to environmental causes, certificates, or eco-friendly products.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>What types of waste can I check using your platform?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Our waste guide covers plastic items, paper & cardboard, glass containers, metal cans, e-waste (electronics & batteries), organic waste, and many other common household items. Simply type in any item to get instant guidance on proper disposal.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>How accurate is the environmental impact tracking?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Our impact calculations are based on standard environmental data from reputable sources like EPA and research institutions. While estimates may vary based on regional factors, we strive to provide realistic approximations of carbon savings, water conservation, and resource protection.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <h4>Can businesses and organizations use SmartRecycle?</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Absolutely! We offer enterprise solutions for businesses, schools, and organizations wanting to implement comprehensive waste management programs. Contact us for custom pricing and features including bulk pickup scheduling, team challenges, and detailed analytics.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Support Categories -->
<section class="container">
    <div class="section" style="background: linear-gradient(135deg, #E8F5E8, #F1F8E9); padding: 3rem; border-radius: 20px;">
        <h2>üõ†Ô∏è Support Categories</h2>
        <div class="support-grid">
            <div class="support-card">
                <div class="support-icon">üîß</div>
                <h4>Technical Support</h4>
                <p>Issues with platform functionality, bugs, or technical difficulties</p>
                <div class="support-contact">
                    <strong>Email:</strong> tech@smartrecycle.com<br>
                    <strong>Response:</strong> Within 4 hours
                </div>
            </div>

            <div class="support-card">
                <div class="support-icon">ü§ù</div>
                <h4>Partnership Inquiries</h4>
                <p>Collaboration opportunities, business partnerships, and enterprise solutions</p>
                <div class="support-contact">
                    <strong>Email:</strong> partnerships@smartrecycle.com<br>
                    <strong>Response:</strong> Within 24 hours
                </div>
            </div>

            <div class="support-card">
                <div class="support-icon">üì∞</div>
                <h4>Media & Press</h4>
                <p>Press inquiries, media kits, interviews, and promotional materials</p>
                <div class="support-contact">
                    <strong>Email:</strong> media@smartrecycle.com<br>
                    <strong>Response:</strong> Within 12 hours
                </div>
            </div>

            <div class="support-card">
                <div class="support-icon">üí°</div>
                <h4>Feature Requests</h4>
                <p>Suggestions for new features, improvements, and platform enhancements</p>
                <div class="support-contact">
                    <strong>Email:</strong> feedback@smartrecycle.com<br>
                    <strong>Response:</strong> Within 48 hours
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Emergency Contact -->
<section class="container">
    <div class="section">
        <div class="emergency-contact">
            <div class="emergency-header">
                <h2>üö® Emergency Waste Disposal</h2>
                <p>For hazardous materials requiring immediate attention</p>
            </div>
            
            <div class="emergency-grid">
                <div class="emergency-item">
                    <div class="emergency-type">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h4>Chemical/Hazardous Waste</h4>
                    </div>
                    <div class="emergency-contact-info">
                        <p><strong>Hotline:</strong> 1800-112-112</p>
                        <p><strong>Email:</strong> emergency@pollution.gov.in</p>
                    </div>
                </div>
                
                <div class="emergency-item">
                    <div class="emergency-type">
                        <i class="fas fa-ambulance"></i>
                        <h4>Medical Waste</h4>
                    </div>
                    <div class="emergency-contact-info">
                        <p><strong>Hotline:</strong> 1800-180-1104</p>
                        <p><strong>Email:</strong> medwaste@health.gov.in</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="container">
    <div class="section text-center">
        <div style="background: linear-gradient(135deg, #4CAF50, #2E7D32); color: white; padding: 3rem; border-radius: 20px;">
            <h2 style="color: white;">üå± Ready to Make a Difference?</h2>
            <p style="font-size: 1.2rem; margin-bottom: 2rem; color: rgba(255,255,255,0.9);">
                Don't wait! Start your sustainable journey today and become part of the solution.
            </p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="{{ url_for('waste_guide') }}" class="cta-button" style="background: white; color: #2E7D32;">
                    <i class="fas fa-play"></i> Try Platform Now
                </a>
                <a href="{{ url_for('about') }}" class="cta-button" style="background: rgba(255,255,255,0.2); border: 2px solid white;">
                    <i class="fas fa-info-circle"></i> Learn More
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Enhanced contact form submission
    function submitContactForm() {
        const form = document.getElementById('contact-form');
        const submitBtn = document.querySelector('.form-button');
        const formData = new FormData(form);
        
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            phone: formData.get('phone') || '',
            subject: formData.get('subject'),
            message: formData.get('message'),
            newsletter: formData.get('newsletter') === 'on'
        };

        // Validate required fields
        if (!data.name || !data.email || !data.subject || !data.message) {
            showMessage('Please fill in all required fields.', 'warning');
            return;
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(data.email)) {
            showMessage('Please enter a valid email address.', 'warning');
            return;
        }

        // Show loading state
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending Message...';
        submitBtn.disabled = true;

        // Simulate form submission
        fetch('/submit-contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            if (result.success) {
                showSuccessResponse(result.message);
                form.reset();
            } else {
                showMessage('Error sending message. Please try again.', 'error');
            }
            
            // Reset button
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
            submitBtn.disabled = false;
        })
        .catch(error => {
            console.error('Error:', error);
            showMessage('Error sending message. Please try again.', 'error');
            
            // Reset button
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
            submitBtn.disabled = false;
        });
    }

    function showSuccessResponse(message) {
        const successDiv = document.createElement('div');
        successDiv.className = 'success-response fade-in';
        successDiv.innerHTML = `
            <div style="background: linear-gradient(135deg, #4CAF50, #388E3C); color: white; padding: 2rem; border-radius: 15px; text-align: center; margin: 2rem 0;">
                <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                <h3>Message Sent Successfully! ‚úÖ</h3>
                <p style="margin: 1rem 0; font-size: 1.1rem;">${message}</p>
                <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                    <p style="margin: 0; font-size: 0.9rem;">
                        üìß We'll get back to you soon!<br>
                        üíö Thank you for choosing SmartRecycle
                    </p>
                </div>
            </div>
        `;
        
        const formSection = document.querySelector('.contact-form-section');
        formSection.appendChild(successDiv);
        successDiv.scrollIntoView({ behavior: 'smooth' });
        
        // Auto-remove after 8 seconds
        setTimeout(() => {
            successDiv.remove();
        }, 8000);
    }

    // FAQ toggle functionality
    function toggleFAQ(questionElement) {
        const faqItem = questionElement.parentElement;
        const answer = faqItem.querySelector('.faq-answer');
        const icon = questionElement.querySelector('i');
        
        // Close all other FAQs
        document.querySelectorAll('.faq-item').forEach(item => {
            if (item !== faqItem) {
                item.classList.remove('active');
                item.querySelector('.faq-answer').style.display = 'none';
                item.querySelector('.faq-question i').style.transform = 'rotate(0deg)';
            }
        });
        
        // Toggle current FAQ
        if (faqItem.classList.contains('active')) {
            faqItem.classList.remove('active');
            answer.style.display = 'none';
            icon.style.transform = 'rotate(0deg)';
        } else {
            faqItem.classList.add('active');
            answer.style.display = 'block';
            icon.style.transform = 'rotate(180deg)';
        }
    }

    // Phone number formatting
    document.getElementById('phone').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 0 && !value.startsWith('91')) {
            if (value.length === 10) {
                value = '91' + value;
            }
        }
        if (value.length > 0) {
            e.target.value = '+' + value.replace(/(\d{2})(\d{5})(\d{5})/, '$1 $2-$3');
        }
    });

    // Email validation on blur
    document.getElementById('email').addEventListener('blur', function() {
        const email = this.value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (email && !emailRegex.test(email)) {
            this.style.borderColor = '#F44336';
            showMessage('Please enter a valid email address.', 'warning');
        } else if (email) {
            this.style.borderColor = '#4CAF50';
        }
    });

    // Character counter for message field
    document.addEventListener('DOMContentLoaded', function() {
        const messageField = document.getElementById('message');
        const maxLength = 1000;
        
        // Create character counter
        const counter = document.createElement('div');
        counter.className = 'character-counter';
        counter.style.textAlign = 'right';
        counter.style.fontSize = '0.9rem';
        counter.style.color = '#666';
        counter.style.marginTop = '0.5rem';
        counter.textContent = `0/${maxLength} characters`;
        
        messageField.parentNode.appendChild(counter);
        
        messageField.addEventListener('input', function() {
            const length = this.value.length;
            counter.textContent = `${length}/${maxLength} characters`;
            
            if (length > maxLength * 0.9) {
                counter.style.color = '#FF9800';
            } else if (length > maxLength * 0.8) {
                counter.style.color = '#F44336';
            } else {
                counter.style.color = '#666';
            }
        });
        
        // Add animations to contact methods
        const contactMethods = document.querySelectorAll('.contact-method');
        contactMethods.forEach((method, index) => {
            method.style.opacity = '0';
            method.style.transform = 'translateX(-20px)';
            method.style.transition = 'all 0.6s ease';
            method.style.transitionDelay = `${index * 0.1}s`;
            
            setTimeout(() => {
                method.style.opacity = '1';
                method.style.transform = 'translateX(0)';
            }, 500 + (index * 100));
        });
    });

    // Add custom CSS
    const contactStyles = document.createElement('style');
    contactStyles.textContent = `
        .contact-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            margin-top: 2rem;
        }
        
        .contact-form-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .contact-info-section {
            background: linear-gradient(135deg, #F1F8E9, #E8F5E8);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .contact-methods {
            margin: 2rem 0;
        }
        
        .contact-method {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .method-icon {
            background: #4CAF50;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .method-content h4 {
            margin: 0 0 0.5rem 0;
            color: #2E7D32;
        }
        
        .method-content p {
            margin: 0;
            color: #333;
            font-weight: bold;
        }
        
        .response-time {
            color: #666;
            font-size: 0.9rem;
            font-weight: normal;
        }
        
        .social-links {
            margin-top: 2rem;
            text-align: center;
        }
        
        .social-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }
        
        .social-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            text-decoration: none;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .social-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .social-btn.twitter { background: #1DA1F2; }
        .social-btn.linkedin { background: #0A66C2; }
        .social-btn.instagram { background: #E4405F; }
        .social-btn.github { background: #333; }
        
        .faq-container {
            margin-top: 2rem;
        }
        
        .faq-item {
            background: white;
            margin-bottom: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            cursor: pointer;
            background: #F9F9F9;
            transition: all 0.3s ease;
        }
        
        .faq-question:hover {
            background: #F1F8E9;
        }
        
        .faq-question h4 {
            margin: 0;
            color: #2E7D32;
        }
        
        .faq-question i {
            color: #4CAF50;
            transition: transform 0.3s ease;
        }
        
        .faq-answer {
            display: none;
            padding: 1.5rem;
            color: #666;
            line-height: 1.6;
        }
        
        .support-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .support-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .support-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .support-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .support-contact {
            background: #F1F8E9;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
            text-align: left;
        }
        
        .emergency-contact {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid #F44336;
        }
        
        .emergency-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .emergency-header h2 {
            color: #D32F2F;
            margin-bottom: 0.5rem;
        }
        
        .emergency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .emergency-item {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .emergency-type {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .emergency-type i {
            color: #F44336;
            font-size: 1.5rem;
        }
        
        .emergency-type h4 {
            margin: 0;
            color: #D32F2F;
        }
        
        .emergency-contact-info p {
            margin: 0.5rem 0;
            color: #333;
        }
        
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            cursor: pointer;
            line-height: 1.4;
        }
        
        .checkbox-container input[type="checkbox"] {
            margin: 0;
            width: auto;
        }
        
        @media (max-width: 768px) {
            .contact-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .social-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .emergency-grid {
                grid-template-columns: 1fr;
            }
            
            .support-grid {
                grid-template-columns: 1fr;
            }
        }
    `;
    document.head.appendChild(contactStyles);
</script>
{% endblock %}
